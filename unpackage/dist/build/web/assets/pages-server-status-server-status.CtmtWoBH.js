import{r as a,A as s,a as e,c as l,w as t,y as u,i as c,o as r,b as n,f as d,g as o,F as v,e as i,d as f,t as _,n as y,l as p,B as m,h as k,S as b,k as h,m as g}from"./index-D79phuLK.js";import{_ as x,o as T,r as w,a as C}from"./my-nav.CW2L8Bme.js";import{a as S}from"./system.VgJ8Gk4z.js";const I=x({__name:"server-status",setup(x){const I=a(S()+66),P=a([{name:"SRVä¸»å…¥å£",addr:"bc.vincentzyu233.cn"},{name:"IP+PORTç›´è¿ž",addr:"sh-aliyun2.vincentzyu233.cn:53332"}]),j=a(0),R=a(!1),z=a(""),N=a({}),B=s((()=>P.value[j.value])),E=s((()=>{var a;return(null==(a=N.value)?void 0:a.online)?"online":"offline"})),F=s((()=>{var a;return(null==(a=N.value)?void 0:a.online)?"åœ¨çº¿":"ç¦»çº¿"}));function L(a){m({data:a,success:()=>{k({title:"å·²å¤åˆ¶åˆ°å‰ªè´´æ¿",icon:"success",duration:1500})},fail:()=>{k({title:"å¤åˆ¶å¤±è´¥",icon:"none",duration:1500})}})}async function O(){z.value="",R.value=!0,N.value={};try{const a=P.value[j.value].addr,s=`https://us-cc.vincentzyu233.cn/fastapi_wrap/mcjava/server_status/${encodeURIComponent(a)}`,e=await u({url:s,method:"GET",timeout:15e3});if(!(e.statusCode>=200&&e.statusCode<300))throw new Error(`HTTP ${e.statusCode}`);N.value=e.data||{}}catch(a){console.error("[server-status] fetch error",a),z.value=String((null==a?void 0:a.message)||a)}finally{R.value=!1}}const V=a(Number(4));return T((a=>{V.value=(null==a?void 0:a.LastIdx)?Number(a.LastIdx):4,O()})),(a,s)=>{const u=c,m=b,k=h,x=g,T=w(e("my-nav"),C);return r(),l(u,{class:"server-status-page"},{default:t((()=>[n(u,{class:"WorksPage pageBg"}),n(m,{class:"serverTabsScroll","scroll-x":"",style:i({height:I.value+"px"})},{default:t((()=>[(r(!0),d(v,null,o(P.value,((a,s)=>(r(),l(u,{key:a.addr,class:y(["ServerTab",j.value===s?"active":""]),onClick:a=>{return e=s,void(j.value!==e&&(j.value=e,O()));var e}},{default:t((()=>[n(u,{class:"ServerTabText"},{default:t((()=>[f(_(a.name),1)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))])),_:1},8,["style"]),n(m,{class:"content-scroll","scroll-y":""},{default:t((()=>[n(u,{class:"content",style:i({paddingTop:I.value+"px"})},{default:t((()=>[n(u,{class:"details"},{default:t((()=>[n(u,{class:"summary"},{default:t((()=>[R.value?(r(),l(u,{key:0,class:"status loading-status"},{default:t((()=>[f("åŠ è½½ä¸­...")])),_:1})):z.value?(r(),l(u,{key:1,class:"status offline"},{default:t((()=>[f(_(F.value),1)])),_:1})):(r(),l(u,{key:2,class:y(["status",E.value])},{default:t((()=>[f(_(F.value),1)])),_:1},8,["class"])),n(u,{class:"title-with-copy"},{default:t((()=>[n(k,{class:"title"},{default:t((()=>[f(_(B.value.addr),1)])),_:1}),n(u,{class:"copy-btn",onClick:s[0]||(s[0]=a=>L(B.value.addr))},{default:t((()=>[n(k,{class:"copy-icon"},{default:t((()=>[f("ðŸ“‹")])),_:1})])),_:1})])),_:1}),N.value.ip_address?(r(),l(u,{key:3,class:"ip-with-copy"},{default:t((()=>[n(k,{class:"ip"},{default:t((()=>[f("IP: "+_(N.value.ip_address),1)])),_:1}),n(u,{class:"copy-btn",onClick:s[1]||(s[1]=a=>L(N.value.ip_address))},{default:t((()=>[n(k,{class:"copy-icon"},{default:t((()=>[f("ðŸ“‹")])),_:1})])),_:1})])),_:1})):p("",!0)])),_:1}),R.value?(r(),l(u,{key:0,class:"loading"},{default:t((()=>[n(u,{class:"spinner"}),n(k,null,{default:t((()=>[f("æ­£åœ¨åŠ è½½è¯¦ç»†ä¿¡æ¯...")])),_:1})])),_:1})):z.value?(r(),l(u,{key:1,class:"error"},{default:t((()=>[n(k,null,{default:t((()=>[f("åŠ è½½å¤±è´¥ï¼š"+_(z.value),1)])),_:1})])),_:1})):(r(),l(u,{key:2},{default:t((()=>[n(u,{class:"kv"},{default:t((()=>[n(k,{class:"k"},{default:t((()=>[f("ç‰ˆæœ¬")])),_:1}),n(k,{class:"v"},{default:t((()=>{var a;return[f(_((null==(a=N.value.version)?void 0:a.name_clean)||"-"),1)]})),_:1})])),_:1}),n(u,{class:"kv"},{default:t((()=>[n(k,{class:"k"},{default:t((()=>[f("åœ¨çº¿çŽ©å®¶")])),_:1}),n(k,{class:"v"},{default:t((()=>{var a,s;return[f(_((null==(a=N.value.players)?void 0:a.online)??"-")+" / "+_((null==(s=N.value.players)?void 0:s.max)??"-"),1)]})),_:1})])),_:1}),n(u,{class:"kv"},{default:t((()=>[n(k,{class:"k"},{default:t((()=>[f("MOTD")])),_:1}),n(k,{class:"v"},{default:t((()=>{var a;return[f(_((null==(a=N.value.motd)?void 0:a.clean)||"-"),1)]})),_:1})])),_:1}),N.value.srv_record?(r(),l(u,{key:0,class:"kv"},{default:t((()=>[n(k,{class:"k"},{default:t((()=>[f("SRV")])),_:1}),n(k,{class:"v"},{default:t((()=>[f(_(N.value.srv_record.host)+":"+_(N.value.srv_record.port),1)])),_:1})])),_:1})):p("",!0),N.value.icon?(r(),l(x,{key:1,src:N.value.icon,mode:"aspectFit",class:"server-icon"},null,8,["src"])):p("",!0)])),_:1}))])),_:1})])),_:1},8,["style"])])),_:1}),n(T,{class:"down-nav",y:Number(4),x:V.value},null,8,["y","x"])])),_:1})}}},[["__scopeId","data-v-358f38b6"]]);export{I as default};
